@model SalesFiguresAPI.Models.StorePageViewModel

@{
    string test = string.Empty;
}
<div class="jumbotron">
    <h1>Sales Dashboard</h1>
</div>
<div class="row">
    <canvas id="myChart" width="800" height="400"></canvas>

    @for (int i = 0; i < Model.Data.Count(); i++)
    {
        //making a JS array
        if (i == 0)
        {
            test = Model.Data[i].TodaysValue.ToString();
        }
        else
        {
            test = test + "," + Model.Data[i].TodaysValue.ToString();
        }
    }
</div>
@section Scripts{
    <script>
        var result = "@test";
        var resultsArray = result.split(',');
        var context = $("#myChart").get(0).getContext("2d");

        var data = {
            //Labels should be the hours
            labels: ["January", "February", "March", "April", "May", "June", "July"],
            datasets: [{

                label: "Knightsbridge",
                fillColor: "rgba(220,220,220,0,2)",
                strokeColor: "rgba(220,220,220,1)",
                pointColor: "rgba(220,220,220,1)",
                pointStrokeColor: "#fff",
                pointHighlightFill: "#fff",
                pointHighlightStroke: "rgba(220,220,220,1)",
                data: resultsArray
            }]
        }

        var myNewChart = new Chart(context, {
            type: "line",
            data: data,
        });
    </script>
}